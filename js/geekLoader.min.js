var dDL=document;
function GeekLoader(){this.type='life';this.setSize();this.positionsLife=[];this.generate();this.contain='loader';this.size=5;this.timer;this.border=true;this.style='default';this.antPos;this.degree=0;this.time=500;this.styleLoaded={};};
var GL=GeekLoader.prototype;
GL.getTypesAvailable=function(){return ['life','ant']};
GL.checkType=function(){if(this.getTypesAvailable().indexOf(this.type)==-1)this.type='life';};
GL.checkSize=function(){if(this.sizeH<4)this.sizeH=4;if(this.sizeV<4)this.sizeV=4;};
GL.generate=function(){this.checkType();this.checkSize();if(this.type=='life'){this.positionsLife=[];var c,l,h,v,e;c=0;l=parseInt((this.sizeH*this.sizeV)*0.2);do{h=Math.floor(Math.random()*this.sizeH+1);v=Math.floor(Math.random()*this.sizeV+1);e=`${h}-${v}`;if(this.positionsLife.indexOf(e)==-1){this.positionsLife.push(e);c++;}}while(c<l);}};
GL.loadBrick=function(){var e,l,iP,px,py;e='';l=dDL.getElementById(this.contain);iP=l.offsetLeft;px=iP;py=l.offsetTop;this.styleLoaded=this.getCSS();for(var i=1;i<=this.sizeH;i++){for(var j=1;j<=this.sizeV;j++){e+=`<div class="brickW" id="brick${i.toString()}-${j.toString()}-${this.contain}" style="left:${px}px;top:${py}px;${this.styleLoaded.bW}"></div>`;px+=this.size;}px=iP;py+=this.size;}l.innerHTML=e;};
GL.getCSS=function(){var cW,cBr,cB,cA,b,s1,s2,s3,sr;b=(this.border)?1:0;s1=`position:absolute;height:${this.size}px;width:${this.size}px;background-color:#`;s2=`;border:solid #`;s3=` ${b}px;`;sr=`top:0px;left:0px;height:${this.size}px;width:${this.size}px;background-color:#`;switch(this.style){case 'primary':cW=`337ab7`;cBr=`2e6da4`;cB=`fff`;cA=`FF0303`;break;case 'not-primary':cW=`fff`;cBr=`2e6da4`;cB=`337ab7`;cA=`FF0303`;break;case 'success':cW=`5cb85c`;cBr=`4cae4c`;cB=`fff`;cA=`FF0303`;break;case 'not-success':cW=`fff`;cBr=`4cae4c`;cB=`5cb85c`;cA=`FF0303`;break;case 'info':cW=`5bc0de`;cBr=`46b8da`;cB=`fff`;cA=`FF0303`;break;case 'not-info':cW=`fff`;cBr=`46b8da`;cB=`5bc0de`;cA=`FF0303`;break;case 'warning':cW=`f0ad4e`;cBr=`eea236`;cB=`fff`;cA=`000`;break;case 'not-warning':cW=`fff`;cBr=`eea236`;cB=`f0ad4e`;cA=`000`;break;case 'danger':cW=`d9534f`;cBr=`d43f3a`;cB=`fff`;cA=`000`;break;case 'not-danger':cW=`fff`;cBr=`d43f3a`;cB=`d9534f`;cA=`000`;break;case 'default':default:cW=`FFF`;cBr=`999`;cB=`000`;cA=`FF0303`;break;}return{bW:`${s1}${cW}${s2}${cBr}${s3}`,bB:`${s1}${cB}${s2}${cBr}${s3}`,bR:`${sr}${cA}${s2}${cBr}${s3}`}};
GL.setFigure=function(){var d,b,s,v,dV;switch(this.type){case 'life':v=this.positionsLife;for(var i=0;i<v.length;i++){b=`brick${v[i]}-${this.contain}`;d=dDL.getElementById(b);d.className='brickB';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bB}`;d.setAttribute('style',s);}break;case 'ant':this.antPos=Math.floor(this.sizeH/2)+'-'+Math.floor(this.sizeV/2);b=`brick${this.antPos}-${this.contain}`;d=dDL.getElementById(b);dV=dDL.createElement('div');dV.className='brickR';dV.setAttribute('style',this.styleLoaded.bR);d.appendChild(dV);break;}};
GL.setSize=function(h,v){this.sizeH=(h==undefined)?12:h;this.sizeV=(v==undefined)?12:v;};
GL.start=function(){this.loadBrick();this.setFigure();var t=this;this.timer=setInterval(function(){t.move()},this.time);};
GL.move=function(){if(this.type=='life'){this.moveCellG();}else{this.moveCellA();}};
GL.moveCellG=function(){var m,b,d,c,s;m=false;for(var i=1;i<=this.sizeH;i++){for(var j=1;j<=this.sizeV;j++){b=`brick${i}-${j}-${this.contain}`;d=dDL.getElementById(b);c=cC(i,j,this);if(d.className=='brickB'&&((c<2)||(c>3))){d.className='brickW';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bW}`;d.setAttribute('style',s);m=true;}else if(d.className=='brickW'&&(c==3)){d.className='brickB';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bB}`;d.setAttribute('style',s);m=true;}}}if(!m){this.generate();this.setFigure();}function cC(x,y,t){var b,l,d;l=0;for(var i=-1;i<=1;i++){for(var j=-1;j<=1;j++){if(i!=0||j!=0){b=`brick${x+i}-${y+j}-${t.contain}`;d=dDL.getElementById(b);if(d!=null&&d.className=='brickB'){l++;}}}}return l;}};
GL.moveCellA=function(){var aA,nP,a,vA,nN,c,c,nM,d;aA=`<div class="brickR" style="${this.styleLoaded.bR}"></div>`;a=`brick${this.antPos}-${this.contain}`;vA=this.antPos.split('-');nM=false;d=dDL.getElementById(a);if(d.className=='brickW'){c='brickB';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bB}`;switch(this.degree){case 0:if((parseInt(vA[0])-1)>0){nN=`${parseInt(vA[0])-1}-${vA[1]}`;}this.degree=90;break;case 90:if((parseInt(vA[1])+1)<=this.sizeV){nN=`${vA[0]}-${parseInt(vA[1])+1}`;}this.degree=180;break;case 180:if((parseInt(vA[0])+1)<=this.sizeH){nN=`${parseInt(vA[0])+1}-${vA[1]}`;}this.degree=270;break;case 270:if((parseInt(vA[1])-1)>0){nN=`${vA[0]}-${parseInt(vA[1])-1}`;}this.degree=0;break;}}else{c='brickW';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bW}`;switch(this.degree){case 0:if((parseInt(vA[0])+1)<=this.sizeH){nN=`${parseInt(vA[0])+1}-${vA[1]}`;}this.degree=270;break;case 90:if((parseInt(vA[1])-1)>0){nN=`${vA[0]}-${parseInt(vA[1])-1}`;}this.degree=0;break;case 180:if((parseInt(vA[0])-1)>0){nN=`${parseInt(vA[0])-1}-${vA[1]}`;}this.degree=90;break;case 270:if((parseInt(vA[1])+1)<=this.sizeV){nN=`${vA[0]}-${parseInt(vA[1])+1}`;}this.degree=180;break;}}if(nN!=undefined){this.antPos=nN;d.innerHTML='';d.className=c;d.setAttribute('style',s);nP=`brick${this.antPos}-${this.contain}`;dDL.getElementById(nP).innerHTML=aA;}};
GL.stop=function(){clearInterval(this.timer);this.cleanDesk();};
GL.cleanDesk=function(){dDL.getElementById(this.contain).innerHTML='';};