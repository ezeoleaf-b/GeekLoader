var dDL=document;
function GeekLoader(){this.type='life';this.setSize();this.positionsLife=[];this.contain='loader';this.size=5;this.timer;this.border=true;this.style='default';this.antPos;this.degree=0;this.time=500;this.styleLoaded={};};
var GL=GeekLoader.prototype;
GL.getTypesAvailable=function(){return ['life','ant','tardis','invaders'];};
GL.checkType=function(){if(!~this.getTypesAvailable().indexOf(this.type)) this.type='life';};
GL.checkSize=function(){var r,c;switch(this.type){case 'tardis':r=(this.rows<14)?14:this.rows;c=(this.columns<9)?9:this.columns;break;case 'invaders':r=(this.rows<10)?10:this.rows;c=(this.columns<13)?13:this.columns;break;case 'ant':case 'life':default:r=(this.rows<4)?4:this.rows;c=(this.columns<4)?4:this.columns;break;}this.rows=r;this.columns=c;};
GL.generate=function(){this.checkType();this.checkSize();if(this.type=='life'){this.positionsLife=[];var c,l;c=0;l=parseInt((this.rows*this.columns)* 0.2);do{var h,v,e;h=Math.floor(Math.random()*this.rows+1);v=Math.floor(Math.random()*this.columns+1);e=`${h}-${v}`;if(!~this.positionsLife.indexOf(e)){this.positionsLife.push(e);c++;}}while(c<l);}else if(this.type=='tardis'){this.positionsLife=this.getTardisPositions();}else if(this.type=='invaders'){this.positionsLife=this.getSpaceInvadersPositions();}};
GL.getSpaceInvadersPositions=function(){var bR,bC,sP,nB,i,j,pC,p;sP=[];nB=['1-3','1-9','2-4','2-8','3-3','3-4','3-5','3-6','3-7','3-8','3-9','4-2','4-3','4-5','4-6','4-7','4-9','4-10','5-1','5-2','5-3','5-4','5-5','5-6','5-7','5-8','5-9','5-10','5-11','6-1','6-3','6-4','6-5','6-6','6-7','6-8','6-9','6-11','7-1','7-3','7-9','7-11','8-4','8-5','8-7','8-8'];if(((this.columns-11)%2)!=0){this.columns++;}if(((this.rows-8)%2)!=0){this.rows++;}bR=(this.rows-8)/2;bC=(this.columns-11)/2;for(i=1;i<=this.rows;i++){for(j=1;j<=this.columns;j++){pC=`${i}-${j}`;if(~nB.indexOf(pC)){p=`${i+bR}-${j+bC}`;sP.push(p);}}}return sP;};
GL.getTardisPositions=function(){var pT,d,p,i,j;pT=[];d={s:2,e:this.columns-1,b:this.rows-1,t:5};this.lastRowT=this.rows;for(i=d.s;i<=d.e;i++){p=`${d.b}-${i}`;pT.push(p);p=`${d.t}-${i}`;pT.push(p);}for(i=d.t;i<=d.b;i++){p=`${i}-${d.s}`;pT.push(p);p=`${i}-${d.e}`;pT.push(p);}for(i=(d.t+2);i<(d.b-1);i=i+2){for(j=d.s;j<=d.e;j++){p=`${i}-${j}`;pT.push(p);}}for(i=(d.s+1);i<=(d.e-1);i++){p=`${(d.t-1)}-${i}`;pT.push(p);}gTT(this);return pT.filter(function(e,p){return pT.indexOf(e)==p;});function gTT(t){var m,f,mP;m=[];f=2;mP=parseInt((t.columns)/2);if((t.columns%2)==0){m=[mP,(mP+1)];}else{m=[mP+1];}for(i=f;i<(d.b);i++){for(j=0;j<m.length;j++){p=`${i}-${m[j]}`;pT.push(p);}}}};
GL.loadBrick=function(){var e,cN,l,iP,px,py,i,j;e='';l=dDL.getElementById(this.contain);px=iP=l.offsetLeft;py=l.offsetTop;this.styleLoaded=this.getCSS();for(i=1;i<=this.rows;i++){for(j=1;j<=this.columns;j++){e=e.concat(`<div class="brickW" id="brick${i}-${j}-${this.contain}" style="left:${px}px;top:${py}px;${this.styleLoaded.bW}"></div>`);px+=this.size;}px=iP;py+=this.size;}l.innerHTML=e;};
GL.getCSS=function(){var b,s1,s2,s3,s3,sr,cW,cBr,cB,cA;b=(~~this.border);s1=`position:absolute;height:${this.size}px;width:${this.size}px;background-color:#`;s2=`;border:solid #`;s3=` ${b}px;`;sr=`top:0px;left:0px;height:${parseInt(this.size)}px;width:${parseInt(this.size)}px;background-color:#`;switch(this.style){case 'primary':cW=`337ab7`;cBr=`2e6da4`;cB=`fff`;cA=`FF0303`;break;case 'not-primary':cW=`fff`;cBr=`2e6da4`;cB=`337ab7`;cA=`FF0303`;break;case 'success':cW=`5cb85c`;cBr=`4cae4c`;cB=`fff`;cA=`FF0303`;break;case 'not-success':cW=`fff`;cBr=`4cae4c`;cB=`5cb85c`;cA=`FF0303`;break;case 'info':cW=`5bc0de`;cBr=`46b8da`;cB=`fff`;cA=`FF0303`;break;case 'not-info':cW=`fff`;cBr=`46b8da`;cB=`5bc0de`;cA=`FF0303`;break;case 'warning':cW=`f0ad4e`;cBr=`eea236`;cB=`fff`;cA=`000`;break;case 'not-warning':cW=`fff`;cBr=`eea236`;cB=`f0ad4e`;cA=`000`;break;case 'danger':cW=`d9534f`;cBr=`d43f3a`;cB=`fff`;cA=`000`;break;case 'not-danger':cW=`fff`;cBr=`d43f3a`;cB=`d9534f`;cA=`000`;break;case 'default':default:cW=`FFF`;cBr=`999`;cB=`000`;cA=`FF0303`;break;}return {bW:`${s1}${cW}${s2}${cBr}${s3}`,bB:`${s1}${cB}${s2}${cBr}${s3}`,bR:`${sr}${cA}${s2}${cBr}${s3}`}};
GL.setFigure=function(){var v,b,d,i,dR;switch(this.type){case 'life':case 'tardis':case 'invaders':v=this.positionsLife;for(i=0;i<v.length;i++){b=`brick${v[i]}-${this.contain}`;d=dDL.getElementById(b);this.setStyle(d,'brickB',this.styleLoaded.bB);}break;case 'ant':this.antPos=Math.floor(this.rows/2)+'-'+Math.floor(this.columns/2);b=`brick${this.antPos}-${this.contain}`;d=dDL.getElementById(b);dR=dDL.createElement('div');dR.className='brickR';dR.setAttribute('style',this.styleLoaded.bR);d.appendChild(dR);break;}};
GL.setSize=function(h,v){this.rows=(h==undefined)?12:h;this.columns=(v==undefined)?12:v;};
GL.start=function(){this.generate();this.loadBrick();this.setFigure();var t=this;this.timer=setInterval(function(){t.move()},this.time);};
GL.move=function(){switch(this.type){case 'life':this.moveCellG();break;case 'ant':this.moveCellA();break;case 'tardis':this.moveCellT();break;case 'invaders':this.moveCellI();break;}};
GL.moveCellI=function(){var pC,bR,bC,b,c,sL,s,d,p,i,j;pC=['3-1','3-11','4-1','4-11','6-1','6-2','6-10','6-11','7-1','7-11','8-2','8-4','8-5','8-7','8-8','8-10'];bR=(this.rows-8)/2;bC=(this.columns-11)/2;for(i=1;i<this.rows;i++){for(j=1;j<this.columns;j++){p=`${i}-${j}`;if(~pC.indexOf(p)){b=`brick${i+bR}-${j+bC}-${this.contain}`;d=dDL.getElementById(b);if(d.className=='brickB'){this.setStyle(d,'brickW',this.styleLoaded.bW);}else if(d.className=='brickW'){this.setStyle(d,'brickB',this.styleLoaded.bB);}}}}};
GL.setStyle=function(d,c,sL){d.className=c;s=`left:${d.style.left};top:${d.style.top};${sL}`;d.setAttribute('style',s);};
GL.moveCellT=function(){var b,p,d,i,r;r=this.lastRowT;r=(r-1==1)?this.rows:r-1;for(i=1;i<=this.columns;i++){p=`${r}-${i}`;b=`brick${r}-${i}-${this.contain}`;d=dDL.getElementById(b);if(d.className=='brickB'){this.setStyle(d,'brickW',this.styleLoaded.bW);}else if(d.className=='brickW'&&(~this.positionsLife.indexOf(p))){this.setStyle(d,'brickB',this.styleLoaded.bB);}}this.lastRowT=r;};
GL.moveCellG=function(){var m,b,i,j,d,c;m=false;for(i=1;i<=this.rows;i++){for(j=1;j<=this.columns;j++){b=`brick${i}-${j}-${this.contain}`;d=dDL.getElementById(b);c=cC(i,j,this);if(d.className=='brickB'&&((c<2)||(c>3))){this.setStyle(d,'brickW',this.styleLoaded.bW);m=true;}else if(d.className=='brickW'&&(c==3)){this.setStyle(d,'brickB',this.styleLoaded.bB);m=true;}}}if(!m){this.generate();this.setFigure();}function cC(x,y,t){var b,l,d,i,j;l=0;for(i=-1;i<=1;i++){for(j=-1;j<=1;j++){if(i!=0||j!=0){b=`brick${x+i}-${y+j}-${t.contain}`;d=dDL.getElementById(b);if(d!=null&&d.className=='brickB'){l++;}}}}return l;}};
GL.moveCellA=function(){var aA,nP,a,vA,nN,vA0,vA1,cN,cS,d,dg;aA=`<div class="brickR" style="${this.styleLoaded.bR}"></div>`;a=`brick${this.antPos}-${this.contain}`;vA=this.antPos.split('-');d=dDL.getElementById(a);vA0=0;vA1=0;dg=this.degree;if(d.className=='brickW'){cN='brickB';cS=this.styleLoaded.bB;switch(dg){case 0:if((parseInt(vA[0])-1)>0){vA0=-1;}dg=90;break;case 90:if((parseInt(vA[1])+1)<=this.columns){vA1=1;}dg=180;break;case 180:if((parseInt(vA[0])+1)<=this.rows){vA0=1;}dg=270;break;case 270:if((parseInt(vA[1])-1)>0){vA1=-1;}dg=0;break;}}else{cN='brickW';cS=this.styleLoaded.bW;switch(dg){case 0:if((parseInt(vA[0])+1)<=this.rows){vA0=1;}dg=270;break;case 90:if((parseInt(vA[1])-1)>0){vA1=-1;}dg=0;break;case 180:if((parseInt(vA[0])-1)>0){vA0=-1;}dg=90;break;case 270:if((parseInt(vA[1])+1)<=this.columns){vA1=1;}dg=180;break;}}this.degree=dg;if(vA0!=0||vA1!=0){nN=`${parseInt(vA[0])+vA0}-${parseInt(vA[1])+vA1}`;this.antPos=nN;d.innerHTML='';this.setStyle(d,cN,cS);nP=`brick${this.antPos}-${this.contain}`;dDL.getElementById(nP).innerHTML=aA;}};
GL.stop=function(){clearInterval(this.timer);this.cleanDesk();};
GL.cleanDesk=function(){dDL.getElementById(this.contain).innerHTML='';};