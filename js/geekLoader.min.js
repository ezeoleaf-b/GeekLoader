var dDL=document;
function GeekLoader(){this.type='life';this.setSize();this.positionsLife=[];this.contain='loader';this.size=5;this.timer;this.border=true;this.style='default';this.antPos;this.degree=0;this.time=500;this.styleLoaded={};};
var GL=GeekLoader.prototype;
GL.getTypesAvailable=function(){return['life','ant','tardis'];};
GL.checkType=function(){if(!~this.getTypesAvailable().indexOf(this.type))this.type='life';};
GL.checkSize=function(){this.rows=(this.type=='tardis')?((this.rows<14)?14:this.rows):((this.rows<4)?4:this.rows);this.columns=(this.type=='tardis')?((this.columns<9)?9:this.columns):((this.columns<4)?4:this.columns);};
GL.generate=function(){this.checkType();this.checkSize();if(this.type=='life'){this.positionsLife=[];var c,l;c=0;l=parseInt((this.rows*this.columns)*0.2);do{var h,v,e;h=Math.floor(Math.random()*this.rows+1);v=Math.floor(Math.random()*this.columns+1);e=`${h}-${v}`;if(!~this.positionsLife.indexOf(e)){this.positionsLife.push(e);c++;}}while(c<l);}else if(this.type=='tardis'){this.positionsLife=this.getTardisPositions();}};
GL.getTardisPositions=function(){var pT=[];var p,i;var d={s:2,e:this.columns-1,b:this.rows-1,t:5};this.lastRowT=this.rows;for(i=d.s;i<=d.e;i++){p=`${d.b}-${i}`;pT.push(p);p=`${d.t}-${i}`;pT.push(p);}for(i=d.t;i<=d.b;i++){p=`${i}-${d.s}`;pT.push(p);p=`${i}-${d.e}`;pT.push(p);}for(i=(d.t+2);i<(d.b-1);i=i+2){for(var j=d.s;j<=d.e;j++){p=`${i}-${j}`;pT.push(p);}}for(i=(d.s+1);i<=(d.e-1);i++){p=`${(d.t -1)}-${i}`;pT.push(p);}gTT(this);return pT.filter(function(ef,pf){return pT.indexOf(ef)==pf;});function gTT(t){var m,f,mP,j;m=[];f=2;mP=parseInt((t.columns)/2);if((t.columns%2==0)){m=[mP,(mP+1)];}else{m=[mP+1];}for(i=f;i<(d.b);i++){for(j=0;j<m.length;j++){p=`${i}-${m[j]}`;pT.push(p);}}}};
GL.loadBrick=function(){var e,c,l,iP,i,j,px,py;e='';l=dDL.getElementById(this.contain);iP=l.offsetLeft;px=iP;py=l.offsetTop;this.styleLoaded=this.getCSS();for(i=1;i<=this.rows;i++){for(j=1;j<=this.columns;j++){e+=`<div class="brickW" id="brick${i.toString()}-${j.toString()}-${this.contain}" style="left: ${px}px;top:${py}px;${this.styleLoaded.bW}"></div>`;px+=this.size;}px=iP;py+=this.size;}l.innerHTML=e;};
GL.getCSS=function(){var b,s1,s2,s3,sr,cW,cBr,cB,cA;b=(this.border)?1:0;s1=`position:absolute;height:${this.size}px;width:${this.size}px;background-color:#`;s2=`;border:solid #`;s3=` ${b}px;`;sr=`top: 0px;left:0px;height:${parseInt(this.size)}px;width:${parseInt(this.size)}px;background-color:#`;switch(this.style){case 'primary':cW=`337ab7`;cBr=`2e6da4`;cB=`fff`;cA=`FF0303`;break;case 'not-primary':cW=`fff`;cBr=`2e6da4`;cB=`337ab7`;cA=`FF0303`;break;case 'success':cW=`5cb85c`;cBr=`4cae4c`;cB=`fff`;cA=`FF0303`;break;case 'not-success':cW=`fff`;cBr=`4cae4c`;cB=`5cb85c`;cA=`FF0303`;break;case 'info':cW=`5bc0de`;cBr=`46b8da`;cB=`fff`;cA=`FF0303`;break;case 'not-info':cW=`fff`;cBr=`46b8da`;cB=`5bc0de`;cA=`FF0303`;break;case 'warning':cW=`f0ad4e`;cBr=`eea236`;cB=`fff`;cA=`000`;break;case 'not-warning':cW=`fff`;cBr=`eea236`;cB=`f0ad4e`;cA=`000`;break;case 'danger':cW=`d9534f`;cBr=`d43f3a`;cB=`fff`;cA=`000`;break;case 'not-danger':cW=`fff`;cBr=`d43f3a`;cB=`d9534f`;cA=`000`;break;case 'default':default:cW=`FFF`;cBr=`999`;cB=`000`;cA=`FF0303`;break;}return {bW:`${s1}${cW}${s2}${cBr}${s3}`,bB:`${s1}${cB}${s2}${cBr}${s3}`,bR:`${sr}${cA}${s2}${cBr}${s3}`};};
GL.setFigure=function(){var b,d,s,v,i,dA;switch(this.type){case 'life':case 'tardis':v=this.positionsLife;for(i=0;i<v.length;i++){b=`brick${v[i]}-${this.contain}`;d=dDL.getElementById(b);d.className='brickB';s=`left:${d.style.left};top:${d.style.top};${this.styleLoaded.bB}`;d.setAttribute('style',s);}break;case 'ant':this.antPos=Math.floor(this.rows/2)+'-'+Math.floor(this.columns/2);b=`brick${this.antPos}-${this.contain}`;d=dDL.getElementById(b);dA=dDL.createElement('div');dA.className='brickR';dA.setAttribute('style',this.styleLoaded.bR);d.appendChild(dA);break;}};
GL.setSize=function(h,v){this.rows=(h==undefined)?12:h;this.columns=(v==undefined)?12:v;};
GL.start=function(){this.generate();this.loadBrick();this.setFigure();var t=this;this.timer=setInterval(function(){t.move()},this.time);};
GL.move=function(){if(this.type=='life'){this.moveCellG();}else if(this.type=='ant'){this.moveCellA();}else if(this.type=='tardis'){this.moveCellT();}};
GL.moveCellT=function(){var b,p,d,i,s,c,sN,t;if((this.lastRowT-1==1)){this.lastRowT=this.rows;}else{this.lastRowT--;}for(i=1;i<=this.columns;i++){p=`${this.lastRowT}-${i}`;b=`brick${this.lastRowT}-${i}-${this.contain}`;d=dDL.getElementById(b);t=false;if(d.className=='brickB'){c='brickW';sN=this.styleLoaded.bW;t=true;}else if(d.className=='brickW'&&(~this.positionsLife.indexOf(p))){c='brickB';sN=this.styleLoaded.bB;t=true;}if(t){d.className=c;s=`left:${d.style.left};top:${d.style.top};${sN}`;d.setAttribute('style',s);}}};
GL.moveCellG=function(){var m,b,d,s,c,i,j,t,cN,sN;m=false;for(i=1;i<=this.rows;i++){for (j=1;j<=this.columns;j++){b=`brick${i}-${j}-${this.contain}`;d=dDL.getElementById(b);c=cC(i,j,this);t=false;if(d.className=='brickB'&&((c<2)||(c>3))){cN='brickW';sN=this.styleLoaded.bW;t=true;}else if(d.className=='brickW'&&(c==3)){cN='brickB';sN=this.styleLoaded.bB;t=true;}if(t){d.className=cN;s=`left:${d.style.left};top:${d.style.top};${sN}`;d.setAttribute('style',s);m=true;}}}if(!m){this.generate();this.setFigure();}function cC(x,y,t){var b,l,d,i,j;l=0;for(i=-1;i<=1;i++){for(j=-1;j<=1;j++){if(i!=0||j!=0){b=`brick${x+i}-${y+j}-${t.contain}`;d=dDL.getElementById(b);if(d!=null&&d.className=='brickB'){l++;}}}}return l;}};
GL.moveCellA=function(){var aA,nP,a,vA,nN,nM,cN,cS,d,dg,s;aA=`<div class="brickR" style="${this.styleLoaded.bR}"></div>`;a=`brick${this.antPos}-${this.contain}`;vA=this.antPos.split('-');nM=false;d=dDL.getElementById(a);if(d.className=='brickW'){cN='brickB';cS=this.styleLoaded.bB;switch(this.degree){case 0:if((parseInt(vA[0])-1)>0){nN=`${parseInt(vA[0])-1}-${vA[1]}`;}dg=90;break;case 90:if((parseInt(vA[1])+1)<=this.columns){nN=`${vA[0]}-${parseInt(vA[1])+1}`;}dg=180;break;case 180:if((parseInt(vA[0])+1)<=this.rows){nN=`${parseInt(vA[0])+1}-${vA[1]}`;}dg=270;break;case 270:if((parseInt(vA[1])-1)>0){nN=`${vA[0]}-${parseInt(vA[1])-1}`;}dg=0;break;}}else{cN='brickW';cS=this.styleLoaded.bW;switch(this.degree){case 0:if((parseInt(vA[0])+1)<=this.rows){nN=`${parseInt(vA[0])+1}-${vA[1]}`;}dg=270;break;case 90:if((parseInt(vA[1])-1)>0){nN=`${vA[0]}-${parseInt(vA[1])-1}`;}dg=0;break;case 180:if((parseInt(vA[0])-1)>0){nN=`${parseInt(vA[0])-1}-${vA[1]}`;}dg=90;break;case 270:if((parseInt(vA[1])+1)<=this.columns){nN=`${vA[0]}-${parseInt(vA[1])+1}`;}dg=180;break;}}this.degree=dg;if(nN!=undefined){s=`left:${d.style.left};top:${d.style.top};${cS}`;this.antPos=nN;d.innerHTML='';d.className=cN;d.setAttribute('style',s);nP=`brick${this.antPos}-${this.contain}`;dDL.getElementById(nP).innerHTML=aA;}};
GL.stop=function(){clearInterval(this.timer);this.cleanDesk();};
GL.cleanDesk=function(){dDL.getElementById(this.contain).innerHTML='';};